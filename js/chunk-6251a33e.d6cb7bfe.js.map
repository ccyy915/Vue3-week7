{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.symbol.description.js","webpack:///./src/views/Products.vue","webpack:///./src/components/UserProductModal.vue","webpack:///./src/components/UserProductModal.vue?75d3","webpack:///./src/views/Products.vue?31e6"],"names":["$","DESCRIPTORS","global","has","isObject","defineProperty","f","copyConstructorProperties","NativeSymbol","Symbol","prototype","undefined","description","EmptyStringDescriptionStore","SymbolWrapper","arguments","length","String","result","this","symbolPrototype","constructor","symbolToString","toString","native","regexp","configurable","get","symbol","valueOf","string","call","desc","slice","replace","forced","class","role","active","isLoading","products","item","style","key","id","src","imageUrl","alt","title","price","type","disabled","loadingStatus","loadingItem","getProduct","addToCart","pages","pagination","getProducts","ref","product","tabindex","aria-hidden","data-bs-dismiss","aria-label","category","content","origin_price","qty","min","$emit","props","Object","default","data","status","modal","mounted","$refs","keyboard","backdrop","methods","openModal","show","hideModal","hide","render","name","currentPage","components","UserProductModal","Pagination","created","page","url","$http","then","res","success","alert","message","userProductModal","cart","product_id","post","console","log"],"mappings":"gHAGA,IAAIA,EAAI,EAAQ,QACZC,EAAc,EAAQ,QACtBC,EAAS,EAAQ,QACjBC,EAAM,EAAQ,QACdC,EAAW,EAAQ,QACnBC,EAAiB,EAAQ,QAAuCC,EAChEC,EAA4B,EAAQ,QAEpCC,EAAeN,EAAOO,OAE1B,GAAIR,GAAsC,mBAAhBO,MAAiC,gBAAiBA,EAAaE,iBAExDC,IAA/BH,IAAeI,aACd,CACD,IAAIC,EAA8B,GAE9BC,EAAgB,WAClB,IAAIF,EAAcG,UAAUC,OAAS,QAAsBL,IAAjBI,UAAU,QAAmBJ,EAAYM,OAAOF,UAAU,IAChGG,EAASC,gBAAgBL,EACzB,IAAIN,EAAaI,QAEDD,IAAhBC,EAA4BJ,IAAiBA,EAAaI,GAE9D,MADoB,KAAhBA,IAAoBC,EAA4BK,IAAU,GACvDA,GAETX,EAA0BO,EAAeN,GACzC,IAAIY,EAAkBN,EAAcJ,UAAYF,EAAaE,UAC7DU,EAAgBC,YAAcP,EAE9B,IAAIQ,EAAiBF,EAAgBG,SACjCC,EAAyC,gBAAhCP,OAAOT,EAAa,SAC7BiB,EAAS,wBACbpB,EAAee,EAAiB,cAAe,CAC7CM,cAAc,EACdC,IAAK,WACH,IAAIC,EAASxB,EAASe,MAAQA,KAAKU,UAAYV,KAC3CW,EAASR,EAAeS,KAAKH,GACjC,GAAIzB,EAAIU,EAA6Be,GAAS,MAAO,GACrD,IAAII,EAAOR,EAASM,EAAOG,MAAM,GAAI,GAAKH,EAAOI,QAAQT,EAAQ,MACjE,MAAgB,KAATO,OAAcrB,EAAYqB,KAIrChC,EAAE,CAAEE,QAAQ,EAAMiC,QAAQ,GAAQ,CAChC1B,OAAQK,M,4DC5CLsB,MAAM,8B,GACJA,MAAM,Y,GACJA,MAAM,4C,GAYFA,MAAM,a,GACLA,MAAM,c,GACPA,MAAM,a,GACJA,MAAM,0B,SAQLA,MAAM,+BACNC,KAAK,U,EAGL,eAA+C,QAAzCD,MAAM,mBAAkB,cAAU,G,iBACpC,U,SAUJA,MAAM,+BACNC,KAAK,U,EAGL,eAA+C,QAAzCD,MAAM,mBAAkB,cAAU,G,iBACpC,W,gLA/CpB,eAAuC,GAA7BE,OAAQ,EAAAC,WAAS,mBAE3B,eAqDM,MArDN,EAqDM,CApDJ,eAmDM,MAnDN,EAmDM,CAlDJ,eAiDM,MAjDN,EAiDM,E,mBAhDJ,eA+CM,2BA5CW,EAAAC,UAAQ,SAAhBC,G,wBAHT,eA+CM,OA9CJL,MAAM,YACNM,MAAA,cAECC,IAAKF,EAAKG,I,CAEX,eAIE,OAHCC,IAAKJ,EAAKK,SACXV,MAAM,eACNW,IAAI,I,gBAEN,eAmCM,MAnCN,EAmCM,CAlCJ,eAA4C,KAA5C,EAA4C,eAAlBN,EAAKO,OAAK,GACpC,eAA2C,IAA3C,EAA2C,eAAnBP,EAAKQ,OAAQ,KAAE,GACvC,eA+BM,MA/BN,EA+BM,CA9BJ,eAcS,UAbPC,KAAK,SACLd,MAAM,4BACLe,SAAU,EAAAC,cAAcC,cAAgBZ,EAAKG,GAC7C,QAAK,mBAAE,EAAAU,WAAWb,EAAKG,M,CAKhB,EAAAQ,cAAcC,cAAgBZ,EAAKG,I,iBAH3C,eAMM,MANN,EAMM,CADJ,K,mDAIJ,eAcS,UAbPM,KAAK,SACLd,MAAM,yBACLe,SAAU,EAAAC,cAAcC,cAAgBZ,EAAKG,GAC7C,QAAK,mBAAE,EAAAW,UAAUd,EAAKG,M,CAKf,EAAAQ,cAAcC,cAAgBZ,EAAKG,I,iBAH3C,eAMM,MANN,EAMM,CADJ,K,wEAWhB,eAAuE,GAA1DY,MAAO,EAAAC,WAAa,YAAY,EAAAC,a,gCAC7C,eAIoB,GAHlBC,IAAI,mBACHC,QAAS,EAAAA,QACT,YAAa,EAAAL,W,yFC5DdnB,MAAM,aACNQ,GAAG,eACHiB,SAAS,KACTC,cAAY,OACZH,IAAI,U,GAECvB,MAAM,sC,GACJA,MAAM,iB,GACJA,MAAM,gB,GACHA,MAAM,yB,GAERA,MAAM,e,EACV,eAKU,UAJRc,KAAK,SACLd,MAAM,YACN2B,kBAAgB,QAChBC,aAAW,S,YAGV5B,MAAM,c,GAENA,MAAM,M,iBAAK,W,GAENA,MAAM,Y,GAEXA,MAAM,M,iBAAK,W,GACAA,MAAM,Y,GAEfA,MAAM,a,SACJA,MAAM,M,SAGNA,MAAM,M,SAGNA,MAAM,M,GAKVA,MAAM,gB,GACJA,MAAM,oB,gDA1CnB,eA4DM,MA5DN,EA4DM,CArDJ,eAoDM,MApDN,EAoDM,CAnDJ,eAkDM,MAlDN,EAkDM,CAjDJ,eAUM,MAVN,EAUM,CATJ,eACiC,OADjC,EACiC,eAA1B,EAAAwB,QAAQK,UAAQ,GACvB,eAAgD,KAAhD,EAAgD,eAArB,EAAAL,QAAQZ,OAAK,GACxC,IAOF,eAoBM,MApBN,EAoBM,CAnBJ,eAAsD,OAAjDZ,MAAM,iBAAkBS,IAAK,EAAAe,QAAQd,U,gBAC1C,eAGI,IAHJ,EAGI,C,EADF,eAAuD,OAAvD,EAAuD,eAA7B,EAAAc,QAAQhD,aAAW,KAE/C,eAEI,IAFJ,EAEI,C,EADI,eAAmD,OAAnD,EAAmD,eAAzB,EAAAgD,QAAQM,SAAO,KAEjD,eAUM,MAVN,EAUM,CATmB,EAAAN,QAAQX,M,wCAA/B,eAEM,MAFN,EAEM,eADD,EAAAW,QAAQO,cAAe,MAC5B,IACsB,EAAAP,QAAQX,O,iBAA9B,eAEM,MAFN,EAAqC,MACjC,eAAG,EAAAW,QAAQO,cAAe,MAC9B,I,sBACsB,EAAAP,QAAQX,O,iBAA9B,eAEM,MAFN,EAEM,eADD,EAAAW,QAAQX,OAAQ,MACrB,I,0BAGJ,eAgBM,MAhBN,EAgBM,CAfJ,eAcM,MAdN,EAcM,C,eAbJ,eAKE,SAJAC,KAAK,SACLd,MAAM,e,qDACU,EAAAgC,IAAG,IACnBC,IAAI,K,mBADY,EAAAD,S,WAAhB,MAGF,eAMS,UALPlB,KAAK,SACLd,MAAM,0BACL,QAAK,+BAAE,EAAAkC,MAAK,cAAgB,EAAAV,QAAQhB,GAAI,EAAAwB,QAC1C,oB,8BAYE,GACbG,MAAO,CACLX,QAAS,CACPV,KAAMsB,OACNC,QAFO,WAGL,MAAO,MAIbC,KATa,WAUX,MAAO,CACLC,OAAQ,GACRC,MAAO,GACPR,IAAK,IAGTS,QAhBa,WAiBX1D,KAAKyD,MAAQ,IAAI,IAAMzD,KAAK2D,MAAMF,MAAO,CACvCG,UAAU,EACVC,SAAU,YAGdC,QAAS,CACPC,UADO,WAEL/D,KAAKyD,MAAMO,QAEbC,UAJO,WAKLjE,KAAKyD,MAAMS,UC1FjB,EAAOC,OAAS,EAED,QFiEA,GACbC,KAAM,WACNb,KAFa,WAGX,MAAO,CACLtB,cAAe,CACbC,YAAa,IAEfd,WAAW,EACXC,SAAU,GACVoB,QAAS,GACTH,WAAY,GACZ+B,YAAa,IAGjBC,WAAY,CACVC,mBACAC,aAAA,MAEFC,QAlBa,WAmBXzE,KAAKuC,eAEPuB,QAAS,CACPvB,YADO,WACe,WAAVmC,EAAU,uDAAH,EACjB1E,KAAKqE,YAAcK,EACnB1E,KAAKoB,WAAY,EACjB,IAAMuD,EAAE,UAAO,wCAAP,eAAqC,UAArC,0BAA+ED,GACvF1E,KAAK4E,MAAMpE,IAAImE,GAAKE,MAAK,SAACC,GACpBA,EAAIvB,KAAKwB,SACX,EAAK1D,SAAWyD,EAAIvB,KAAKlC,SACzB,EAAKiB,WAAawC,EAAIvB,KAAKjB,WAC3B,EAAKlB,WAAY,GAEjB4D,MAAMF,EAAIvB,KAAK0B,aAIrB9C,WAfO,SAeIV,GAAI,WACbzB,KAAKoB,WAAY,EACjB,IAAMuD,EAAE,UAAO,wCAAP,eAAqC,UAArC,oBAAyElD,GACjFzB,KAAKiC,cAAcC,YAAcT,EACjCzB,KAAK4E,MAAMpE,IAAImE,GAAKE,MAAK,SAACC,GACpBA,EAAIvB,KAAKwB,SACX,EAAK9C,cAAcC,YAAc,GACjC,EAAKO,QAAUqC,EAAIvB,KAAKd,QACxB,EAAKrB,WAAY,EACjB,EAAKuC,MAAMuB,iBAAiBnB,aAE5BiB,MAAMF,EAAIvB,KAAK0B,aAIrB7C,UA9BO,SA8BGX,GAAa,WAATwB,EAAS,uDAAH,EAClBjD,KAAKoB,WAAY,EACjB,IAAMuD,EAAE,UAAO,wCAAP,eAAqC,UAArC,SACR3E,KAAKiC,cAAcC,YAAcT,EACjC,IAAM0D,EAAO,CACXC,WAAY3D,EACZwB,OAEFjD,KAAK4E,MAAMS,KAAKV,EAAK,CAAEpB,KAAM4B,IAAQN,MAAK,SAACC,GACzCQ,QAAQC,IAAIT,GACRA,EAAIvB,KAAKwB,SACX,EAAK9C,cAAcC,YAAc,GACjC,EAAKyB,MAAMuB,iBAAiBjB,YAC5B,EAAK7C,WAAY,GAEjB4D,MAAMF,EAAIvB,KAAK0B,eGrIzB,EAAOd,OAASA,EAED","file":"js/chunk-6251a33e.d6cb7bfe.js","sourcesContent":["// `Symbol.prototype.description` getter\n// https://tc39.es/ecma262/#sec-symbol.prototype.description\n'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar has = require('../internals/has');\nvar isObject = require('../internals/is-object');\nvar defineProperty = require('../internals/object-define-property').f;\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\n\nvar NativeSymbol = global.Symbol;\n\nif (DESCRIPTORS && typeof NativeSymbol == 'function' && (!('description' in NativeSymbol.prototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var result = this instanceof SymbolWrapper\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  var symbolPrototype = SymbolWrapper.prototype = NativeSymbol.prototype;\n  symbolPrototype.constructor = SymbolWrapper;\n\n  var symbolToString = symbolPrototype.toString;\n  var native = String(NativeSymbol('test')) == 'Symbol(test)';\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  defineProperty(symbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = isObject(this) ? this.valueOf() : this;\n      var string = symbolToString.call(symbol);\n      if (has(EmptyStringDescriptionStore, symbol)) return '';\n      var desc = native ? string.slice(7, -1) : string.replace(regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n","<template>\n  <Loading :active=\"isLoading\"></Loading>\n\n  <div class=\"row justify-content-center\">\n    <div class=\"col-md-8\">\n      <div class=\"d-flex flex-wrap justify-content-between\">\n        <div\n          class=\"card mb-3\"\n          style=\"width: 33%\"\n          v-for=\"item in products\"\n          :key=\"item.id\"\n        >\n          <img\n            :src=\"item.imageUrl\"\n            class=\"card-img-top\"\n            alt=\"\"\n          />\n          <div class=\"card-body\">\n            <h5 class=\"card-title\">{{ item.title }}</h5>\n            <p class=\"card-text\">{{ item.price }} 元</p>\n            <div class=\"btn-group btn-group-sm\">\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-secondary\"\n                :disabled=\"loadingStatus.loadingItem === item.id\"\n                @click=\"getProduct(item.id)\"\n              >\n                <div\n                  class=\"spinner-grow spinner-grow-sm\"\n                  role=\"status\"\n                  v-if=\"loadingStatus.loadingItem === item.id\"\n                >\n                  <span class=\"visually-hidden\">Loading...</span>\n                </div>\n                查看更多\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger\"\n                :disabled=\"loadingStatus.loadingItem === item.id\"\n                @click=\"addToCart(item.id)\"\n              >\n                <div\n                  class=\"spinner-grow spinner-grow-sm\"\n                  role=\"status\"\n                  v-if=\"loadingStatus.loadingItem === item.id\"\n                >\n                  <span class=\"visually-hidden\">Loading...</span>\n                </div>\n                加到購物車\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <Pagination :pages=\"pagination\" @emit-pages=\"getProducts\"></Pagination>\n  <UserProductModal\n    ref=\"userProductModal\"\n    :product=\"product\"\n    @add-to-cart=\"addToCart\"\n  ></UserProductModal>\n</template>\n\n<script>\nimport Pagination from \"@/components/Pagination.vue\";\nimport UserProductModal from \"@/components/UserProductModal.vue\";\n\nexport default {\n  name: \"Products\",\n  data() {\n    return {\n      loadingStatus: {\n        loadingItem: \"\",\n      },\n      isLoading: false,\n      products: [],\n      product: {},\n      pagination: {},\n      currentPage: 1,\n    };\n  },\n  components: {\n    UserProductModal,\n    Pagination,\n  },\n  created() {\n    this.getProducts();\n  },\n  methods: {\n    getProducts(page = 1) {\n      this.currentPage = page;\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products?page=${page}`;\n      this.$http.get(url).then((res) => {\n        if (res.data.success) {\n          this.products = res.data.products;\n          this.pagination = res.data.pagination;\n          this.isLoading = false;\n        } else {\n          alert(res.data.message);\n        }\n      });\n    },\n    getProduct(id) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${id}`;\n      this.loadingStatus.loadingItem = id;\n      this.$http.get(url).then((res) => {\n        if (res.data.success) {\n          this.loadingStatus.loadingItem = \"\";\n          this.product = res.data.product;\n          this.isLoading = false;\n          this.$refs.userProductModal.openModal();\n        } else {\n          alert(res.data.message);\n        }\n      });\n    },\n    addToCart(id, qty = 1) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.loadingStatus.loadingItem = id;\n      const cart = {\n        product_id: id,\n        qty,\n      };\n      this.$http.post(url, { data: cart }).then((res) => {\n        console.log(res);\n        if (res.data.success) {\n          this.loadingStatus.loadingItem = \"\";\n          this.$refs.userProductModal.hideModal();\n          this.isLoading = false;\n        } else {\n          alert(res.data.message);\n        }\n      });\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    class=\"modal fade\"\n    id=\"productModal\"\n    tabindex=\"-1\"\n    aria-hidden=\"true\"\n    ref=\"modal\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <span class=\"badge bg-success me-1\">\n              {{ product.category }}</span>\n          <h5 class=\"modal-title\">{{ product.title }}</h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <img class=\"img-fluid mb-1\" :src=\"product.imageUrl\" />\n          <p class=\"h6\">\n            商品描述：\n            <span class=\"fw-light\">{{ product.description }}</span>\n          </p>\n          <p class=\"h6\">\n            商品內容： <span class=\"fw-light\">{{ product.content }}</span>\n          </p>\n          <div class=\"float-end\">\n            <div class=\"h5\" v-if=\"!product.price\">\n              {{ product.origin_price }} 元\n            </div>\n            <div class=\"h6\" v-if=\"product.price\">\n              原價{{ product.origin_price }} 元\n            </div>\n            <div class=\"h5\" v-if=\"product.price\">\n              {{ product.price }} 元\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <div class=\"input-group mb-3\">\n            <input\n              type=\"number\"\n              class=\"form-control\"\n              v-model.number=\"qty\"\n              min=\"1\"\n            />\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-success\"\n              @click=\"$emit('add-to-cart', product.id, qty)\"\n            >\n              加入購物車\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport Modal from \"bootstrap/js/dist/modal\";\n\nexport default {\n  props: {\n    product: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n  },\n  data() {\n    return {\n      status: {},\n      modal: \"\",\n      qty: 1,\n    };\n  },\n  mounted() {\n    this.modal = new Modal(this.$refs.modal, {\n      keyboard: false,\n      backdrop: \"static\",\n    });\n  },\n  methods: {\n    openModal() {\n      this.modal.show();\n    },\n    hideModal() {\n      this.modal.hide();\n    },\n  },\n};\n</script>\n","import { render } from \"./UserProductModal.vue?vue&type=template&id=65d17ef0\"\nimport script from \"./UserProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./UserProductModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Products.vue?vue&type=template&id=62e80c06\"\nimport script from \"./Products.vue?vue&type=script&lang=js\"\nexport * from \"./Products.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}