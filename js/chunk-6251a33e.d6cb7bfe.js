(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6251a33e"],{e01a:function(t,e,c){"use strict";var a=c("23e7"),o=c("83ab"),i=c("da84"),n=c("5135"),s=c("861d"),d=c("9bf2").f,r=c("e893"),l=i.Symbol;if(o&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var u={},b=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof b?new l(t):void 0===t?l():l(t);return""===t&&(u[e]=!0),e};r(b,l);var p=b.prototype=l.prototype;p.constructor=b;var h=p.toString,g="Symbol(test)"==String(l("test")),j=/^Symbol\((.*)\)[^)]+$/;d(p,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=h.call(t);if(n(u,t))return"";var c=g?e.slice(7,-1):e.replace(j,"$1");return""===c?void 0:c}}),a({global:!0,forced:!0},{Symbol:b})}},e6dc:function(t,e,c){"use strict";c.r(e);var a=c("7a23"),o={class:"row justify-content-center"},i={class:"col-md-8"},n={class:"d-flex flex-wrap justify-content-between"},s={class:"card-body"},d={class:"card-title"},r={class:"card-text"},l={class:"btn-group btn-group-sm"},u={key:0,class:"spinner-grow spinner-grow-sm",role:"status"},b=Object(a["h"])("span",{class:"visually-hidden"},"Loading...",-1),p=Object(a["g"])(" 查看更多 "),h={key:0,class:"spinner-grow spinner-grow-sm",role:"status"},g=Object(a["h"])("span",{class:"visually-hidden"},"Loading...",-1),j=Object(a["g"])(" 加到購物車 ");function O(t,e,c,O,m,f){var v=Object(a["A"])("Loading"),y=Object(a["A"])("Pagination"),w=Object(a["A"])("UserProductModal");return Object(a["t"])(),Object(a["e"])(a["a"],null,[Object(a["h"])(v,{active:m.isLoading},null,8,["active"]),Object(a["h"])("div",o,[Object(a["h"])("div",i,[Object(a["h"])("div",n,[(Object(a["t"])(!0),Object(a["e"])(a["a"],null,Object(a["y"])(m.products,(function(t){return Object(a["t"])(),Object(a["e"])("div",{class:"card mb-3",style:{width:"33%"},key:t.id},[Object(a["h"])("img",{src:t.imageUrl,class:"card-img-top",alt:""},null,8,["src"]),Object(a["h"])("div",s,[Object(a["h"])("h5",d,Object(a["D"])(t.title),1),Object(a["h"])("p",r,Object(a["D"])(t.price)+" 元",1),Object(a["h"])("div",l,[Object(a["h"])("button",{type:"button",class:"btn btn-outline-secondary",disabled:m.loadingStatus.loadingItem===t.id,onClick:function(e){return f.getProduct(t.id)}},[m.loadingStatus.loadingItem===t.id?(Object(a["t"])(),Object(a["e"])("div",u,[b])):Object(a["f"])("",!0),p],8,["disabled","onClick"]),Object(a["h"])("button",{type:"button",class:"btn btn-outline-danger",disabled:m.loadingStatus.loadingItem===t.id,onClick:function(e){return f.addToCart(t.id)}},[m.loadingStatus.loadingItem===t.id?(Object(a["t"])(),Object(a["e"])("div",h,[g])):Object(a["f"])("",!0),j],8,["disabled","onClick"])])])])})),128))])])]),Object(a["h"])(y,{pages:m.pagination,onEmitPages:f.getProducts},null,8,["pages","onEmitPages"]),Object(a["h"])(w,{ref:"userProductModal",product:m.product,onAddToCart:f.addToCart},null,8,["product","onAddToCart"])],64)}c("99af");var m=c("1799"),f=(c("a4d3"),c("e01a"),{class:"modal fade",id:"productModal",tabindex:"-1","aria-hidden":"true",ref:"modal"}),v={class:"modal-dialog modal-dialog-centered"},y={class:"modal-content"},w={class:"modal-header"},P={class:"badge bg-success me-1"},k={class:"modal-title"},S=Object(a["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),C={class:"modal-body"},L={class:"h6"},M=Object(a["g"])(" 商品描述： "),D={class:"fw-light"},I={class:"h6"},$=Object(a["g"])(" 商品內容： "),x={class:"fw-light"},q={class:"float-end"},A={key:0,class:"h5"},T={key:1,class:"h6"},U={key:2,class:"h5"},_={class:"modal-footer"},E={class:"input-group mb-3"};function J(t,e,c,o,i,n){return Object(a["t"])(),Object(a["e"])("div",f,[Object(a["h"])("div",v,[Object(a["h"])("div",y,[Object(a["h"])("div",w,[Object(a["h"])("span",P,Object(a["D"])(c.product.category),1),Object(a["h"])("h5",k,Object(a["D"])(c.product.title),1),S]),Object(a["h"])("div",C,[Object(a["h"])("img",{class:"img-fluid mb-1",src:c.product.imageUrl},null,8,["src"]),Object(a["h"])("p",L,[M,Object(a["h"])("span",D,Object(a["D"])(c.product.description),1)]),Object(a["h"])("p",I,[$,Object(a["h"])("span",x,Object(a["D"])(c.product.content),1)]),Object(a["h"])("div",q,[c.product.price?Object(a["f"])("",!0):(Object(a["t"])(),Object(a["e"])("div",A,Object(a["D"])(c.product.origin_price)+" 元 ",1)),c.product.price?(Object(a["t"])(),Object(a["e"])("div",T," 原價"+Object(a["D"])(c.product.origin_price)+" 元 ",1)):Object(a["f"])("",!0),c.product.price?(Object(a["t"])(),Object(a["e"])("div",U,Object(a["D"])(c.product.price)+" 元 ",1)):Object(a["f"])("",!0)])]),Object(a["h"])("div",_,[Object(a["h"])("div",E,[Object(a["M"])(Object(a["h"])("input",{type:"number",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=function(t){return i.qty=t}),min:"1"},null,512),[[a["H"],i.qty,void 0,{number:!0}]]),Object(a["h"])("button",{type:"button",class:"btn btn-outline-success",onClick:e[2]||(e[2]=function(e){return t.$emit("add-to-cart",c.product.id,i.qty)})}," 加入購物車 ")])])])])],512)}var H=c("7c2b"),V=c.n(H),z={props:{product:{type:Object,default:function(){return{}}}},data:function(){return{status:{},modal:"",qty:1}},mounted:function(){this.modal=new V.a(this.$refs.modal,{keyboard:!1,backdrop:"static"})},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}}};z.render=J;var B=z,F={name:"Products",data:function(){return{loadingStatus:{loadingItem:""},isLoading:!1,products:[],product:{},pagination:{},currentPage:1}},components:{UserProductModal:B,Pagination:m["a"]},created:function(){this.getProducts()},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=e,this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("ccyy915","/products?page=").concat(e);this.$http.get(c).then((function(e){e.data.success?(t.products=e.data.products,t.pagination=e.data.pagination,t.isLoading=!1):alert(e.data.message)}))},getProduct:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("ccyy915","/product/").concat(t);this.loadingStatus.loadingItem=t,this.$http.get(c).then((function(t){t.data.success?(e.loadingStatus.loadingItem="",e.product=t.data.product,e.isLoading=!1,e.$refs.userProductModal.openModal()):alert(t.data.message)}))},addToCart:function(t){var e=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0;var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("ccyy915","/cart");this.loadingStatus.loadingItem=t;var o={product_id:t,qty:c};this.$http.post(a,{data:o}).then((function(t){console.log(t),t.data.success?(e.loadingStatus.loadingItem="",e.$refs.userProductModal.hideModal(),e.isLoading=!1):alert(t.data.message)}))}}};F.render=O;e["default"]=F}}]);
//# sourceMappingURL=chunk-6251a33e.d6cb7bfe.js.map