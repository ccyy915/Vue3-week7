(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c1ad972"],{"1dde":function(e,t,a){var n=a("d039"),c=a("b622"),l=a("2d00"),o=c("species");e.exports=function(e){return l>=51||!n((function(){var t=[],a=t.constructor={};return a[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},8418:function(e,t,a){"use strict";var n=a("c04e"),c=a("9bf2"),l=a("5c6c");e.exports=function(e,t,a){var o=n(t);o in e?c.f(e,o,l(0,a)):e[o]=a}},"99af":function(e,t,a){"use strict";var n=a("23e7"),c=a("d039"),l=a("e8b5"),o=a("861d"),r=a("7b0b"),s=a("50c4"),i=a("8418"),d=a("65f0"),u=a("1dde"),b=a("b622"),m=a("2d00"),h=b("isConcatSpreadable"),f=9007199254740991,O="Maximum allowed index exceeded",j=m>=51||!c((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),p=u("concat"),g=function(e){if(!o(e))return!1;var t=e[h];return void 0!==t?!!t:l(e)},v=!j||!p;n({target:"Array",proto:!0,forced:v},{concat:function(e){var t,a,n,c,l,o=r(this),u=d(o,0),b=0;for(t=-1,n=arguments.length;t<n;t++)if(l=-1===t?o:arguments[t],g(l)){if(c=s(l.length),b+c>f)throw TypeError(O);for(a=0;a<c;a++,b++)a in l&&i(u,b,l[a])}else{if(b>=f)throw TypeError(O);i(u,b++,l)}return u.length=b,u}})},b0c0:function(e,t,a){var n=a("83ab"),c=a("9bf2").f,l=Function.prototype,o=l.toString,r=/^\s*function ([^ (]*)/,s="name";n&&!(s in l)&&c(l,s,{configurable:!0,get:function(){try{return o.call(this).match(r)[1]}catch(e){return""}}})},b789:function(e,t,a){"use strict";a.r(t);a("b0c0");var n=a("7a23"),c={class:"container"},l={class:"row justify-content-center"},o={class:"col-md-6"},r={class:"table align-middle"},s=Object(n["h"])("thead",null,[Object(n["h"])("tr",{style:{"text-align":"center"}},[Object(n["h"])("th",{style:{width:"100px"}},"刪除"),Object(n["h"])("th",null,"品名"),Object(n["h"])("th",null,"數量/單位"),Object(n["h"])("th",null,"單價")])],-1),i={key:0,class:"fas fa-spinner fa-pulse"},d=Object(n["g"])(" x "),u={class:"input-group input-group-sm"},b={class:"input-group mb-3"},m={class:"text-end"},h=Object(n["h"])("td",{colspan:"3",class:"text-end"},"總計",-1),f={class:"text-end"},O={class:"col-md-6"},j={class:"mb-3"},p=Object(n["h"])("label",{for:"email"},"E-mail",-1),g={class:"mb-3"},v=Object(n["h"])("label",{for:"name"},"收件人姓名",-1),y={class:"mb-3"},x=Object(n["h"])("label",{for:"tel"},"收件人電話",-1),C={class:"mb-3"},V=Object(n["h"])("label",{for:"address"},"收件人地址",-1),k={class:"mb-3"},w=Object(n["h"])("label",{for:"message",class:"form-label"},"留言",-1),L={class:"text-end"};function S(e,t,a,S,I,A){var U,q=this,E=Object(n["A"])("Loading"),$=Object(n["A"])("Field"),F=Object(n["A"])("ErrorMessage"),M=Object(n["A"])("Form");return Object(n["t"])(),Object(n["e"])(n["a"],null,[Object(n["h"])(E,{active:I.isLoading},null,8,["active"]),Object(n["h"])("div",c,[Object(n["h"])("div",l,[Object(n["h"])("div",o,[Object(n["h"])("button",{disabled:0===(null===(U=this.cart.carts)||void 0===U?void 0:U.length),class:"btn btn-outline-danger flex-end mb-3",onClick:t[1]||(t[1]=function(e){return A.deleteAll()})}," 清除購物車 ",8,["disabled"]),Object(n["h"])("table",r,[s,Object(n["h"])("tbody",null,[I.cart.carts?(Object(n["t"])(!0),Object(n["e"])(n["a"],{key:0},Object(n["y"])(I.cart.carts,(function(t){return Object(n["t"])(),Object(n["e"])("tr",{key:t.id},[Object(n["h"])("td",null,[Object(n["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return A.removeCartItem(t.id)},disabled:I.loadingStatus.loadingItem===t.id},[I.loadingStatus.loadingItem===t.id?(Object(n["t"])(),Object(n["e"])("i",i)):Object(n["f"])("",!0),d],8,["onClick","disabled"])]),Object(n["h"])("td",null,Object(n["D"])(t.product.title),1),Object(n["h"])("td",null,[Object(n["h"])("div",u,[Object(n["h"])("div",b,[Object(n["M"])(Object(n["h"])("input",{min:"1",type:"number",onChange:function(a){return e.updateCart(t)},disabled:t.id===I.loadingStatus.loadingItem,"onUpdate:modelValue":function(e){return t.qty=e},class:"form-control"},null,40,["onChange","disabled","onUpdate:modelValue"]),[[n["H"],t.qty,void 0,{number:!0}]])])])]),Object(n["h"])("td",m,Object(n["D"])(t.product.price),1)])})),128)):Object(n["f"])("",!0)]),Object(n["h"])("tfoot",null,[Object(n["h"])("tr",null,[h,Object(n["h"])("td",f,Object(n["D"])(I.cart.total),1)])])])]),Object(n["h"])("div",O,[Object(n["h"])(M,{onSubmit:A.submitOrder,ref:"form"},{default:Object(n["L"])((function(e){var a,c=e.errors;return[Object(n["h"])("div",j,[p,Object(n["h"])($,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":c["email"]}],placeholder:"請輸入您的 Email",rules:"email|required",modelValue:I.form.user.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return I.form.user.email=e})},null,8,["class","modelValue"]),Object(n["h"])(F,{name:"email",class:"invalid-feedback"})]),Object(n["h"])("div",g,[v,Object(n["h"])($,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":c["姓名"]}],placeholder:"請輸入您的姓名",rules:"required",modelValue:I.form.user.name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return I.form.user.name=e})},null,8,["class","modelValue"]),Object(n["h"])(F,{name:"姓名",class:"invalid-feedback"})]),Object(n["h"])("div",y,[x,Object(n["h"])($,{id:"tel",name:"電話",type:"text",class:["form-control",{"is-invalid":c["電話"]}],placeholder:"請輸入您的電話",rules:"required|min:8|max:10",modelValue:I.form.user.tel,"onUpdate:modelValue":t[4]||(t[4]=function(e){return I.form.user.tel=e})},null,8,["class","modelValue"]),Object(n["h"])(F,{name:"電話",class:"invalid-feedback"})]),Object(n["h"])("div",C,[V,Object(n["h"])($,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":c["地址"]}],placeholder:"請輸入您的地址",rules:"required",modelValue:I.form.user.address,"onUpdate:modelValue":t[5]||(t[5]=function(e){return I.form.user.address=e})},null,8,["class","modelValue"]),Object(n["h"])(F,{name:"地址",class:"invalid-feedback"})]),Object(n["h"])("div",k,[w,Object(n["M"])(Object(n["h"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[6]||(t[6]=function(e){return I.form.message=e})},null,512),[[n["H"],I.form.message]])]),Object(n["h"])("div",L,[Object(n["h"])("button",{type:"submit",class:"btn btn-success",disabled:0===(null===(a=q.cart.carts)||void 0===a?void 0:a.length)}," 送出訂單 ",8,["disabled"])])]})),_:1},8,["onSubmit"])])])])],64)}a("99af");var I={name:"Cart",data:function(){return{loadingStatus:{loadingItem:""},isLoading:!1,cart:{},form:{user:{name:"",email:"",tel:"",address:""},message:""},coupon_code:""}},created:function(){this.getCart()},methods:{getCart:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("ccyy915","/cart");this.$http.get(t).then((function(t){t.data.success?(e.cart=t.data.data,e.isLoading=!1):alert(t.data.message)}))},removeCartItem:function(e){var t=this;this.isLoading=!0,this.loadingStatus.loadingItem=e;var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("ccyy915","/cart/").concat(e);this.$http.delete(a).then((function(e){e.data.success?(alert(e.data.message),t.getCart()):alert(e.data.message),t.loadingStatus.loadingItem="loading",t.isLoading=!1}))},submitOrder:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("ccyy915","/order"),a=this.form;this.$http.post(t,{data:a}).then((function(t){console.log(t),t.data.success?(alert(t.data.message),e.$refs.form.resetForm(),e.getCart()):alert(t.data.message),e.isLoading=!1}))},deleteAll:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("ccyy915","/carts");this.$http.delete(t).then((function(t){e.isLoading=!1,alert(t.data.message),e.getCart()}))}}};I.render=S;t["default"]=I}}]);
//# sourceMappingURL=chunk-0c1ad972.cc5e4a93.js.map