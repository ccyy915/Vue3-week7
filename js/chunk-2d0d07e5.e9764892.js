(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d07e5"],{"67e3":function(t,e,c){"use strict";c.r(e);c("b0c0");var a=c("7a23"),l={class:"row justify-content-center"},n={class:"col-md-10"},d={class:"table mt-4"},r=Object(a["h"])("thead",null,[Object(a["h"])("tr",null,[Object(a["h"])("th",{width:"120"},"成立日期"),Object(a["h"])("th",null,"收件人姓名"),Object(a["h"])("th",{width:"120"},"收件人電話"),Object(a["h"])("th",null,"收件人信箱"),Object(a["h"])("th",{width:"120"},"總金額"),Object(a["h"])("th",{width:"120"},"是否付款"),Object(a["h"])("th",{width:"120"},"編輯")])],-1),o={class:"form-check form-switch"},i={key:0,class:"text-success"},s={key:1},b={class:"btn-group"};function h(t,e,c,h,O,u){var j=Object(a["A"])("Loading"),p=Object(a["A"])("OrderModal"),m=Object(a["A"])("DelModal"),f=Object(a["A"])("Pagination");return Object(a["t"])(),Object(a["e"])(a["a"],null,[Object(a["h"])(j,{active:t.isLoading},null,8,["active"]),Object(a["h"])("div",l,[Object(a["h"])("div",n,[Object(a["h"])("table",d,[r,Object(a["h"])("tbody",null,[(Object(a["t"])(!0),Object(a["e"])(a["a"],null,Object(a["y"])(O.orders,(function(t){return Object(a["t"])(),Object(a["e"])("tr",{key:t.id},[Object(a["h"])("td",null,Object(a["D"])(u.time(t.create_at)),1),Object(a["h"])("td",null,Object(a["D"])(t.user.name),1),Object(a["h"])("td",null,Object(a["D"])(t.user.tel),1),Object(a["h"])("td",null,Object(a["D"])(t.user.email),1),Object(a["h"])("td",null,Object(a["D"])(t.total),1),Object(a["h"])("td",null,[Object(a["h"])("div",o,[Object(a["M"])(Object(a["h"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(t.id),"onUpdate:modelValue":function(e){return t.is_paid=e},onChange:function(e){return u.updatePaid(t)}},null,40,["id","onUpdate:modelValue","onChange"]),[[a["G"],t.is_paid]]),Object(a["h"])("label",{class:"form-check-label",for:"paidSwitch".concat(t.id)},[t.is_paid?(Object(a["t"])(),Object(a["e"])("span",i,"已付款")):(Object(a["t"])(),Object(a["e"])("span",s,"未付款"))],8,["for"])])]),Object(a["h"])("td",null,[Object(a["h"])("div",b,[Object(a["h"])("button",{class:"btn btn-outline-primary btn-sm",type:"button",onClick:function(e){return u.openModal(t)}}," 檢視 ",8,["onClick"]),Object(a["h"])("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:function(e){return u.openDelOrderModal(t)}}," 刪除 ",8,["onClick"])])])])})),128))])]),Object(a["h"])(p,{order:O.tempOrder,ref:"orderModal",onUpdatePaid:u.updatePaid},null,8,["order","onUpdatePaid"]),Object(a["h"])(m,{item:O.tempOrder,ref:"delModal",onDeleteData:u.delOrder},null,8,["item","onDeleteData"]),Object(a["h"])(f,{pages:O.pagination,onEmitPages:u.getOrders},null,8,["pages","onEmitPages"])])])],64)}var O=c("5530"),u=(c("99af"),c("c1df")),j=c.n(u),p={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},m={class:"modal-dialog modal-xl modal-dialog-centered",role:"document"},f={class:"modal-content border-0"},y=Object(a["h"])("div",{class:"modal-header"},[Object(a["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(a["h"])("span",null,"訂單細節")]),Object(a["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),g={class:"modal-body"},v={class:"row"},D={class:"col-md-4"},k=Object(a["h"])("h3",null,"用戶資料",-1),M={class:"table"},w={key:0},x=Object(a["h"])("th",{style:{width:"100px"}},"姓名",-1),P=Object(a["h"])("th",null,"Email",-1),_=Object(a["h"])("th",null,"電話",-1),C=Object(a["h"])("th",null,"地址",-1),L={class:"col-md-8"},$=Object(a["h"])("h3",null,"訂單細節",-1),Y={class:"table"},U=Object(a["h"])("th",{style:{width:"100px"}},"訂單編號",-1),A=Object(a["h"])("th",null,"下單時間",-1),E=Object(a["h"])("th",null,"付款時間",-1),V={key:0},G={key:1},J=Object(a["h"])("th",null,"付款狀態",-1),S={key:0,class:"text-success"},q={key:1,class:"text-muted"},N=Object(a["h"])("th",null,"總金額",-1),z=Object(a["h"])("h3",null,"選購商品",-1),B={class:"table"},F=Object(a["h"])("thead",null,[Object(a["h"])("tr")],-1),H={class:"text-end"},I={class:"d-flex justify-content-end"},K={class:"form-check"},Q={class:"form-check-label",for:"flexCheckDefault"},R={key:0,class:"text-success"},T={key:1},W={class:"modal-footer"},X=Object(a["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Z(t,e,c,l,n,d){return Object(a["t"])(),Object(a["e"])("div",p,[Object(a["h"])("div",m,[Object(a["h"])("div",f,[y,Object(a["h"])("div",g,[Object(a["h"])("div",v,[Object(a["h"])("div",D,[k,Object(a["h"])("table",M,[n.tempOrder.user?(Object(a["t"])(),Object(a["e"])("tbody",w,[Object(a["h"])("tr",null,[x,Object(a["h"])("td",null,Object(a["D"])(n.tempOrder.user.name),1)]),Object(a["h"])("tr",null,[P,Object(a["h"])("td",null,Object(a["D"])(n.tempOrder.user.email),1)]),Object(a["h"])("tr",null,[_,Object(a["h"])("td",null,Object(a["D"])(n.tempOrder.user.tel),1)]),Object(a["h"])("tr",null,[C,Object(a["h"])("td",null,Object(a["D"])(n.tempOrder.user.address),1)])])):Object(a["f"])("",!0)])]),Object(a["h"])("div",L,[$,Object(a["h"])("table",Y,[Object(a["h"])("tbody",null,[Object(a["h"])("tr",null,[U,Object(a["h"])("td",null,Object(a["D"])(n.tempOrder.id),1)]),Object(a["h"])("tr",null,[A,Object(a["h"])("td",null,Object(a["D"])(d.time(n.tempOrder.create_at)),1)]),Object(a["h"])("tr",null,[E,Object(a["h"])("td",null,[n.tempOrder.paid_date?(Object(a["t"])(),Object(a["e"])("span",V,Object(a["D"])(d.time(n.tempOrder.paid_date)),1)):(Object(a["t"])(),Object(a["e"])("span",G,"-"))])]),Object(a["h"])("tr",null,[J,Object(a["h"])("td",null,[n.tempOrder.is_paid?(Object(a["t"])(),Object(a["e"])("strong",S,"已付款")):(Object(a["t"])(),Object(a["e"])("span",q,"尚未付款"))])]),Object(a["h"])("tr",null,[N,Object(a["h"])("td",null,Object(a["D"])(n.tempOrder.total),1)])])]),z,Object(a["h"])("table",B,[F,Object(a["h"])("tbody",null,[(Object(a["t"])(!0),Object(a["e"])(a["a"],null,Object(a["y"])(n.tempOrder.products,(function(t){return Object(a["t"])(),Object(a["e"])("tr",{key:t.id},[Object(a["h"])("th",null,Object(a["D"])(t.product.title),1),Object(a["h"])("td",null,Object(a["D"])(t.qty)+" / "+Object(a["D"])(t.product.unit),1),Object(a["h"])("td",H,Object(a["D"])(t.final_total),1)])})),128))])]),Object(a["h"])("div",I,[Object(a["h"])("div",K,[Object(a["M"])(Object(a["h"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[1]||(e[1]=function(t){return n.tempOrder.is_paid=t})},null,512),[[a["G"],n.tempOrder.is_paid]]),Object(a["h"])("label",Q,[n.tempOrder.is_paid?(Object(a["t"])(),Object(a["e"])("span",R,"已付款")):(Object(a["t"])(),Object(a["e"])("span",T,"未付款"))])])])])])]),Object(a["h"])("div",W,[X,Object(a["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=function(e){return t.$emit("update-paid",n.tempOrder)})}," 修改付款狀態 ")])])])],512)}var tt=c("7c2b"),et=c.n(tt),ct={props:{order:{type:Object,default:function(){return{}}}},data:function(){return{statuts:{},modal:"",tempOrder:{},isPaid:!1}},emits:["update-paid"],infect:["emitter"],watch:{order:function(){this.tempOrder=this.order}},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()},time:function(t){return j()(1e3*t).format("YYYY-MM-DD")}},mounted:function(){this.modal=new et.a(this.$refs.modal)}};ct.render=Z;var at=ct,lt=c("ec05"),nt=c("1799"),dt={name:"Orders",props:["token"],data:function(){return{idLoading:!1,orders:{},tempOrder:{},pagination:{},currentPage:1}},components:{OrderModal:at,DelModal:lt["a"],Pagination:nt["a"]},created:function(){this.getOrders()},methods:{getOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=e,this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("ccyy915","/admin/orders?page=").concat(e);this.$http.get(c).then((function(e){e.data.success&&(t.isLoading=!1,t.orders=e.data.orders,t.pagination=e.data.pagination)}))},time:function(t){return j()(1e3*t).format("YYYY-MM-DD")},openModal:function(t){this.tempOrder=Object(O["a"])({},t),this.isNew=!1;var e=this.$refs.orderModal;e.openModal()},openDelOrderModal:function(t){this.tempOrder=Object(O["a"])({},t);var e=this.$refs.delModal;e.openModal()},delOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("ccyy915","/admin/order/").concat(this.tempOrder.id);this.isLoading=!0,this.$http.delete(e).then((function(){var e=t.$refs.delModal;e.hideModal(),t.getOrders(t.currentPage)}))},updatePaid:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("ccyy915","/admin/order/").concat(t.id),a={is_paid:t.is_paid};this.$http.put(c,{data:a}).then((function(t){e.isLoading=!1;var c=e.$refs.orderModal;c.hideModal(),e.getOrders(e.currentPage),alert(t.data.message)}))}}};dt.render=h;e["default"]=dt}}]);
//# sourceMappingURL=chunk-2d0d07e5.e9764892.js.map